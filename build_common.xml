<?xml version="1.0"?>

<project name="build_common" basedir="./..">

	<description>
		This is a build file for the Test Automation containing common functionality.
	</description>

	<taskdef name="log" classname="com.sag.wm.ant.tasks.is.util.TALogger" classpathref="bda.classpath" />

	<property file="build.properties" />

	<target name="common.create_dir" depends="common.check">
		<if>
			<equals arg1="${overwrite}" arg2="true" />
			<then>
				<antcall target="common.deldir">
					<param name="dir" value="${dir}" />
				</antcall>
			</then>
		</if>
		<log level="INFO" msg="Creating dir '${dir}'" />
		<mkdir dir="${dir}" />
	</target>


	<target name="common.check">
		<log msg="Checking for the existance of the directory ${dir}" level="TRACE" />
		<condition property="direxists">
			<available file="${dir}" type="dir" />
		</condition>
	</target>

	<target name="common.deldir" depends="common.check" if="direxists">
		<log msg="Deleting the directory ${dir}" level="TRACE" />
		<delete dir="${dir}" />
	</target>


	<target name="common.checkos">
		<condition property="testrunner.cmd" value="${soapUI.home}/bin/testrunner.bat">
			<os family="windows" />
		</condition>
		<condition property="testrunner.cmd" value="${soapUI.home}/bin/testrunner.sh">
			<os family="unix" />
		</condition>
	</target>

	<target name="common.createLogDir">
		<!-- create the common log dir -->
		<mkdir dir="${bda.logging.dir}" />
	</target>

</project>